{"uid":"4d119c580e47d9d0","name":"Приглашение пользователя и проверка активации","fullName":"tests.test_users#test_user_invitation","historyId":"079890204cf97f8610d9e73d2a80c272","time":{"start":1753624976403,"stop":1753624997375,"duration":20972},"status":"failed","statusMessage":"AssertionError: assert 'Подразделение не назначено' == 'Пользователь не активирован'\n  \n  - Пользователь не активирован\n  + Подразделение не назначено","statusTrace":"base_url = 'https://sprout-store.ru'\npage_fixture = <function page_fixture.<locals>._factory at 0x7f6e6f1ce8e0>\ndelete_user_fixture = (<function delete_user_fixture.<locals>.mark_user_created at 0x7f6e6f1ce980>, <function delete_user_fixture.<locals>.mark_user_deleted at 0x7f6e6f1cea20>)\n\n    @allure.title(\"Приглашение пользователя и проверка активации\")\n    def test_user_invitation(base_url, page_fixture, delete_user_fixture):\n    \n        # Получаем методы из фикстуры\n        mark_user_created, mark_user_deleted = delete_user_fixture\n    \n        # Путь к auth_states\n        project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n        auth_states_dir = os.path.join(project_root, 'auth_states')\n        auth_state_path = os.path.join(auth_states_dir, \"auth_state_prod.json\")\n    \n        # === Админ: создаёт пользователя ===\n        admin_page = page_fixture()\n        autorization_page = AutorizationPage(admin_page)\n        home_page = HomePage(admin_page)\n        settings_account_page = SettingsAccountPage(admin_page)\n        autorization_page.open(base_url)\n        autorization_page.admin_buyer_authorize()\n    \n        # Записываем куки авторизации в json\n        admin_page.context.storage_state(path=auth_state_path)\n    \n        home_page.click_settings_button()\n        settings_account_page.click_users_button()\n        settings_account_page.add_user()\n    \n        mark_user_created()  # Сообщаем фикстуре, что пользователь создан\n    \n        admin_page.reload()\n    \n        with allure.step(\"Проверяем, что пользователь уже есть, но не активирован\"):\n            settings_account_page.click_first_user_table_row()\n            notification_text = autorization_page.get_notification_text()\n>           assert notification_text == \"Пользователь не активирован\"\nE           AssertionError: assert 'Подразделение не назначено' == 'Пользователь не активирован'\nE             \nE             - Пользователь не активирован\nE             + Подразделение не назначено\n\ntests/test_users.py:47: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1753624939997,"stop":1753624939997,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1753624939997,"stop":1753624939997,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1753624939997,"stop":1753624939997,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1753624939997,"stop":1753624939997,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1753624939998,"stop":1753624939998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1753624939998,"stop":1753624940314,"duration":316},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1753624940314,"stop":1753624940315,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1753624940315,"stop":1753624940315,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1753624940315,"stop":1753624940543,"duration":228},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1753624940315,"stop":1753624940315,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"autorization_fixture","time":{"start":1753624940544,"stop":1753624967703,"duration":27159},"status":"passed","steps":[{"name":"Открываю https://sprout-store.ru/login","time":{"start":1753624940587,"stop":1753624944177,"duration":3590},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Покупатель Администратор)","time":{"start":1753624944177,"stop":1753624947462,"duration":3285},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Открываю https://sprout-store.ru/login","time":{"start":1753624947519,"stop":1753624950911,"duration":3392},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Продавец администратор","time":{"start":1753624950912,"stop":1753624954237,"duration":3325},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Открываю https://sprout-store.ru/login","time":{"start":1753624954285,"stop":1753624957669,"duration":3384},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Закупщик)","time":{"start":1753624957669,"stop":1753624960961,"duration":3292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Открываю https://sprout-store.ru/login","time":{"start":1753624961004,"stop":1753624964384,"duration":3380},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Менеджер контракта","time":{"start":1753624964384,"stop":1753624967691,"duration":3307},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"delete_user_fixture","time":{"start":1753624976403,"stop":1753624976403,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_fixture","time":{"start":1753624976403,"stop":1753624976403,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 'Подразделение не назначено' == 'Пользователь не активирован'\n  \n  - Пользователь не активирован\n  + Подразделение не назначено","statusTrace":"base_url = 'https://sprout-store.ru'\npage_fixture = <function page_fixture.<locals>._factory at 0x7f6e6f1ce8e0>\ndelete_user_fixture = (<function delete_user_fixture.<locals>.mark_user_created at 0x7f6e6f1ce980>, <function delete_user_fixture.<locals>.mark_user_deleted at 0x7f6e6f1cea20>)\n\n    @allure.title(\"Приглашение пользователя и проверка активации\")\n    def test_user_invitation(base_url, page_fixture, delete_user_fixture):\n    \n        # Получаем методы из фикстуры\n        mark_user_created, mark_user_deleted = delete_user_fixture\n    \n        # Путь к auth_states\n        project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n        auth_states_dir = os.path.join(project_root, 'auth_states')\n        auth_state_path = os.path.join(auth_states_dir, \"auth_state_prod.json\")\n    \n        # === Админ: создаёт пользователя ===\n        admin_page = page_fixture()\n        autorization_page = AutorizationPage(admin_page)\n        home_page = HomePage(admin_page)\n        settings_account_page = SettingsAccountPage(admin_page)\n        autorization_page.open(base_url)\n        autorization_page.admin_buyer_authorize()\n    \n        # Записываем куки авторизации в json\n        admin_page.context.storage_state(path=auth_state_path)\n    \n        home_page.click_settings_button()\n        settings_account_page.click_users_button()\n        settings_account_page.add_user()\n    \n        mark_user_created()  # Сообщаем фикстуре, что пользователь создан\n    \n        admin_page.reload()\n    \n        with allure.step(\"Проверяем, что пользователь уже есть, но не активирован\"):\n            settings_account_page.click_first_user_table_row()\n            notification_text = autorization_page.get_notification_text()\n>           assert notification_text == \"Пользователь не активирован\"\nE           AssertionError: assert 'Подразделение не назначено' == 'Пользователь не активирован'\nE             \nE             - Пользователь не активирован\nE             + Подразделение не назначено\n\ntests/test_users.py:47: AssertionError","steps":[{"name":"Открываю https://sprout-store.ru/login","time":{"start":1753624976450,"stop":1753624979852,"duration":3402},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Покупатель Администратор)","time":{"start":1753624979852,"stop":1753624983197,"duration":3345},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаю на иконку настроек","time":{"start":1753624983203,"stop":1753624987563,"duration":4360},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаю на иконку Пользователи","time":{"start":1753624987563,"stop":1753624988654,"duration":1091},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Добавляю пользователя","time":{"start":1753624988654,"stop":1753624994204,"duration":5550},"status":"passed","steps":[{"name":"Кликаю на иконку Добавить пользователя","time":{"start":1753624988654,"stop":1753624989776,"duration":1122},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверяем, что пользователь уже есть, но не активирован","time":{"start":1753624995480,"stop":1753624997374,"duration":1894},"status":"failed","statusMessage":"AssertionError: assert 'Подразделение не назначено' == 'Пользователь не активирован'\n  \n  - Пользователь не активирован\n  + Подразделение не назначено\n","statusTrace":"  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/tests/test_users.py\", line 47, in test_user_invitation\n    assert notification_text == \"Пользователь не активирован\"\n","steps":[{"name":"Кликаю на первого пользователя в списке","time":{"start":1753624995480,"stop":1753624997364,"duration":1884},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Получаю текст подсказки в карточке пользователя","time":{"start":1753624997364,"stop":1753624997374,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"72b048eae7ab2b4a","name":"DEBUG","source":"72b048eae7ab2b4a.txt","type":"text/plain","size":37}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":9,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"delete_user_fixture::0","time":{"start":1753624997378,"stop":1753625012774,"duration":15396},"status":"passed","steps":[{"name":"Удаляю пользователя в teardown","time":{"start":1753624997378,"stop":1753625012774,"duration":15396},"status":"passed","steps":[{"name":"Открываю https://sprout-store.ru/settings/account/user-list","time":{"start":1753624997422,"stop":1753625000830,"duration":3408},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Покупатель Администратор)","time":{"start":1753625000830,"stop":1753625004180,"duration":3350},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаю на иконку настроек","time":{"start":1753625004180,"stop":1753625008545,"duration":4365},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаю на иконку Пользователи","time":{"start":1753625008545,"stop":1753625009651,"duration":1106},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Удаляю последнего созданного пользователя","time":{"start":1753625009651,"stop":1753625012773,"duration":3122},"status":"passed","steps":[{"name":"Кликаю на первого пользователя в списке","time":{"start":1753625009652,"stop":1753625010691,"duration":1039},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаю кнопку удаления пользователя","time":{"start":1753625010691,"stop":1753625011732,"duration":1041},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Кликаю кнопку удаления пользователя","time":{"start":1753625011732,"stop":1753625012773,"duration":1041},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"62adb822ea822eae","name":"DEBUG","source":"62adb822ea822eae.txt","type":"text/plain","size":49}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"22577a023f24559","name":"DEBUG","source":"22577a023f24559.txt","type":"text/plain","size":23}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"page_fixture::0","time":{"start":1753625012774,"stop":1753625013801,"duration":1027},"status":"passed","steps":[],"attachments":[{"uid":"ac66403582946e3f","name":"trace","source":"ac66403582946e3f.zip","type":"application/zip","size":7540559},{"uid":"72ff491da5259b3","name":"failure_screenshot","source":"72ff491da5259b3.png","type":"image/png","size":116658},{"uid":"2249b49a6b699062","name":"page_source","source":"2249b49a6b699062.html","type":"text/html","size":272604},{"uid":"af2dcc94fd3757a5","name":"trace","source":"af2dcc94fd3757a5.zip","type":"application/zip","size":6297074},{"uid":"7e1dff8cd8b4238f","name":"failure_screenshot","source":"7e1dff8cd8b4238f.png","type":"image/png","size":115295},{"uid":"3236b4c67c96d111","name":"page_source","source":"3236b4c67c96d111.html","type":"text/html","size":400523}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"browser::0","time":{"start":1753625080964,"stop":1753625081024,"duration":60},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1753625081025,"stop":1753625081037,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_users"},{"name":"host","value":"pkrvmpptgkbjq6m"},{"name":"thread","value":"6281-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_users"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"4d119c580e47d9d0.json","parameterValues":["'chromium'"]}