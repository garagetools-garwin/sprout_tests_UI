{"uid":"6c3f93aee86613ab","name":"Выдаем и забираем роль администратора у обычного пользователя","fullName":"tests.test_settings#test_change_admin_role_flow","historyId":"b9ddf5043bb883a4867d67c1c7586019","time":{"start":1759931903345,"stop":1759931922724,"duration":19379},"status":"failed","statusMessage":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","statusTrace":"tests/test_settings.py:715: in test_change_admin_role_flow\n    modal_user.transition_to_contracts_page_assertion_not(base_url)\npage_opjects/settings_page/users_settings_page.py:236: in transition_to_contracts_page_assertion_not\n    expect(self.page).not_to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\nE   AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nE   Actual value: https://sprout-store.ru/settings/account/contracts \nE   Call log:\nE     - PageAssertions.not_to_have_url with timeout 7000ms\nE     - waiting for locator(\":root\")\nE       11 × locator resolved to <html lang=\"en\">…</html>\nE          - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1759931538525,"stop":1759931538581,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759931538525,"stop":1759931538525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1759931538525,"stop":1759931538525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1759931538582,"stop":1759931538874,"duration":292},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759931538582,"stop":1759931538582,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759931538582,"stop":1759931538582,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1759931538582,"stop":1759931538582,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1759931538875,"stop":1759931538875,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1759931538875,"stop":1759931538875,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1759931538875,"stop":1759931538875,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1759931538875,"stop":1759931538933,"duration":58},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_fixture","time":{"start":1759931903345,"stop":1759931903345,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","statusTrace":"tests/test_settings.py:715: in test_change_admin_role_flow\n    modal_user.transition_to_contracts_page_assertion_not(base_url)\npage_opjects/settings_page/users_settings_page.py:236: in transition_to_contracts_page_assertion_not\n    expect(self.page).not_to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\nE   AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nE   Actual value: https://sprout-store.ru/settings/account/contracts \nE   Call log:\nE     - PageAssertions.not_to_have_url with timeout 7000ms\nE     - waiting for locator(\":root\")\nE       11 × locator resolved to <html lang=\"en\">…</html>\nE          - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","steps":[{"name":"Вхожу как обычный пользователь","time":{"start":1759931903387,"stop":1759931910350,"duration":6963},"status":"passed","steps":[{"name":"Открываю https://sprout-store.ru/login","time":{"start":1759931903387,"stop":1759931907038,"duration":3651},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Тестовый покупатель для роли админа)","time":{"start":1759931907038,"stop":1759931910350,"duration":3312},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверяю, что ссылка /workspace-list НЕ отображается (Доступна только админу)","time":{"start":1759931910350,"stop":1759931922724,"duration":12374},"status":"failed","statusMessage":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"\n\n","statusTrace":"  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/tests/test_settings.py\", line 715, in test_change_admin_role_flow\n    modal_user.transition_to_contracts_page_assertion_not(base_url)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/page_opjects/settings_page/users_settings_page.py\", line 236, in transition_to_contracts_page_assertion_not\n    expect(self.page).not_to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 19058, in not_to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 141, in not_to_have_url\n    await self._not.to_have_url(urlOrRegExp, timeout, ignoreCase)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 127, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 74, in _expect_impl\n    raise AssertionError(\n","steps":[{"name":"Проверяю отсутствие админских прав путем перехода в настройки аккаунта","time":{"start":1759931912309,"stop":1759931922723,"duration":10414},"status":"failed","statusMessage":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"\n\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/page_opjects/settings_page/users_settings_page.py\", line 236, in transition_to_contracts_page_assertion_not\n    expect(self.page).not_to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 19058, in not_to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 141, in not_to_have_url\n    await self._not.to_have_url(urlOrRegExp, timeout, ignoreCase)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 127, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 74, in _expect_impl\n    raise AssertionError(\n","steps":[],"attachments":[],"parameters":[{"name":"base_url","value":"'https://sprout-store.ru'"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":5,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1759931922740,"stop":1759931923118,"duration":378},"status":"passed","steps":[],"attachments":[{"uid":"e593ef8fcaebc8b","name":"trace","source":"e593ef8fcaebc8b.zip","type":"application/zip","size":4476093},{"uid":"878c08da7cdf8951","name":"failure_screenshot","source":"878c08da7cdf8951.png","type":"image/png","size":80510},{"uid":"1bab66a14b4f2d63","name":"page_source","source":"1bab66a14b4f2d63.html","type":"text/html","size":285236}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"browser::0","time":{"start":1759931997865,"stop":1759931998003,"duration":138},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1759931998005,"stop":1759931998015,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_settings"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"6323-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_settings"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":11,"broken":1,"skipped":0,"passed":22,"unknown":0,"total":34},"items":[{"uid":"c516a58daf841ef6","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/248/#testresult/c516a58daf841ef6","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759847061575,"stop":1759847082158,"duration":20583}},{"uid":"84d396e4d0cca334","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/247/#testresult/84d396e4d0cca334","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759760610089,"stop":1759760631349,"duration":21260}},{"uid":"77e2602a49aee52d","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/246/#testresult/77e2602a49aee52d","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759673924466,"stop":1759673944416,"duration":19950}},{"uid":"77e9ff0ff629a94","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/245/#testresult/77e9ff0ff629a94","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759604049901,"stop":1759604069779,"duration":19878}},{"uid":"9dadca826e8c15a8","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/244/#testresult/9dadca826e8c15a8","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759587485768,"stop":1759587505194,"duration":19426}},{"uid":"fbd78ca30e5cdedc","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/243/#testresult/fbd78ca30e5cdedc","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759501241054,"stop":1759501260625,"duration":19571}},{"uid":"6f2f733dbd3bb936","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/242/#testresult/6f2f733dbd3bb936","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759415044761,"stop":1759415065325,"duration":20564}},{"uid":"224fff84b406c0be","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/241/#testresult/224fff84b406c0be","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759328644333,"stop":1759328665233,"duration":20900}},{"uid":"a6f8774eec958df6","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/240/#testresult/a6f8774eec958df6","status":"failed","statusDetails":"AssertionError: Page URL expected not to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/settings/account/contracts \nCall log:\n  - PageAssertions.not_to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/settings/account/contracts\"","time":{"start":1759324887476,"stop":1759324907271,"duration":19795}},{"uid":"c6d38e2629a33e03","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/239/#testresult/c6d38e2629a33e03","status":"failed","statusDetails":"AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/profile \nCall log:\n  - PageAssertions.to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/profile\"","time":{"start":1759302674028,"stop":1759302708318,"duration":34290}},{"uid":"b3bc90e84c0fb6ec","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/237/#testresult/b3bc90e84c0fb6ec","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\".text-tag-accent.color-dark-grey\")","time":{"start":1759218623900,"stop":1759218673455,"duration":49555}},{"uid":"179dfeefe7cdc3bb","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/236/#testresult/179dfeefe7cdc3bb","status":"passed","time":{"start":1759155666355,"stop":1759155691387,"duration":25032}},{"uid":"f553ac9f3b1c9377","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/235/#testresult/f553ac9f3b1c9377","status":"passed","time":{"start":1759069153233,"stop":1759069178371,"duration":25138}},{"uid":"a8f4779dbffb0133","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/234/#testresult/a8f4779dbffb0133","status":"passed","time":{"start":1758982812095,"stop":1758982837208,"duration":25113}},{"uid":"f7406b6fded6de8e","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/233/#testresult/f7406b6fded6de8e","status":"passed","time":{"start":1758896398947,"stop":1758896424510,"duration":25563}},{"uid":"90d45b0936e34aef","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/232/#testresult/90d45b0936e34aef","status":"passed","time":{"start":1758810163791,"stop":1758810188160,"duration":24369}},{"uid":"a183dec7f19445da","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/231/#testresult/a183dec7f19445da","status":"passed","time":{"start":1758723520574,"stop":1758723546831,"duration":26257}},{"uid":"8d22c2099745ccf6","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/230/#testresult/8d22c2099745ccf6","status":"passed","time":{"start":1758637272993,"stop":1758637298734,"duration":25741}},{"uid":"8662c471bde9eb76","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/229/#testresult/8662c471bde9eb76","status":"passed","time":{"start":1758551107701,"stop":1758551135548,"duration":27847}},{"uid":"eb7b52a3ae76022c","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/228/#testresult/eb7b52a3ae76022c","status":"passed","time":{"start":1758464380230,"stop":1758464406008,"duration":25778}}]},"tags":[]},"source":"6c3f93aee86613ab.json","parameterValues":["'chromium'"]}