{"uid":"c6d38e2629a33e03","name":"Выдаем и забираем роль администратора у обычного пользователя","fullName":"tests.test_settings#test_change_admin_role_flow","historyId":"b9ddf5043bb883a4867d67c1c7586019","time":{"start":1759302674028,"stop":1759302708318,"duration":34290},"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/profile \nCall log:\n  - PageAssertions.to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/profile\"","statusTrace":"tests/test_settings.py:739: in test_change_admin_role_flow\n    modal_user.transition_to_contracts_page_assertion(base_url)\npage_opjects/settings_page/users_settings_page.py:223: in transition_to_contracts_page_assertion\n    expect(self.page).to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\nE   AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nE   Actual value: https://sprout-store.ru/profile \nE   Call log:\nE     - PageAssertions.to_have_url with timeout 7000ms\nE     - waiting for locator(\":root\")\nE       11 × locator resolved to <html lang=\"en\">…</html>\nE          - unexpected value \"https://sprout-store.ru/profile\"","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1759302310576,"stop":1759302310576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1759302310576,"stop":1759302310632,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759302310576,"stop":1759302310576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759302310633,"stop":1759302310633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1759302310633,"stop":1759302310918,"duration":285},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1759302310633,"stop":1759302310633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759302310633,"stop":1759302310633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1759302310918,"stop":1759302310919,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1759302310918,"stop":1759302310918,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1759302310919,"stop":1759302310996,"duration":77},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1759302310919,"stop":1759302310919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_fixture","time":{"start":1759302674028,"stop":1759302674028,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/profile \nCall log:\n  - PageAssertions.to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/profile\"","statusTrace":"tests/test_settings.py:739: in test_change_admin_role_flow\n    modal_user.transition_to_contracts_page_assertion(base_url)\npage_opjects/settings_page/users_settings_page.py:223: in transition_to_contracts_page_assertion\n    expect(self.page).to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\nE   AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nE   Actual value: https://sprout-store.ru/profile \nE   Call log:\nE     - PageAssertions.to_have_url with timeout 7000ms\nE     - waiting for locator(\":root\")\nE       11 × locator resolved to <html lang=\"en\">…</html>\nE          - unexpected value \"https://sprout-store.ru/profile\"","steps":[{"name":"Вхожу как обычный пользователь","time":{"start":1759302674069,"stop":1759302681396,"duration":7327},"status":"passed","steps":[{"name":"Открываю https://sprout-store.ru/login","time":{"start":1759302674069,"stop":1759302678089,"duration":4020},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Тестовый покупатель для роли админа)","time":{"start":1759302678090,"stop":1759302681396,"duration":3306},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверяю, что ссылка /workspace-list НЕ отображается (Доступна только админу)","time":{"start":1759302681396,"stop":1759302686759,"duration":5363},"status":"passed","steps":[{"name":"Проверяю отсутствие админских прав путем перехода в настройки аккаунта","time":{"start":1759302683202,"stop":1759302686759,"duration":3557},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"base_url","value":"'https://sprout-store.ru'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Захожу как админ","time":{"start":1759302686799,"stop":1759302695125,"duration":8326},"status":"passed","steps":[{"name":"Открываю https://sprout-store.ru/login","time":{"start":1759302686799,"stop":1759302690402,"duration":3603},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь (Покупатель Администратор)","time":{"start":1759302690402,"stop":1759302693698,"duration":3296},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Открываю https://sprout-store.ru/settings/account/user-list","time":{"start":1759302693698,"stop":1759302695125,"duration":1427},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Открыть карточку нужного пользователя по email","time":{"start":1759302695125,"stop":1759302698477,"duration":3352},"status":"passed","steps":[{"name":"Открываю карточку пользователя по email 'testgarwin_yur+2@mail.ru'","time":{"start":1759302695125,"stop":1759302696382,"duration":1257},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'testgarwin_yur+2@mail.ru'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Нажимаю Назначить роль","time":{"start":1759302696382,"stop":1759302697428,"duration":1046},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Включаю роль администратора","time":{"start":1759302697428,"stop":1759302698477,"duration":1049},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверяю, что в списке пользователей появилось 'Администратор аккаунта' у юзера","time":{"start":1759302698477,"stop":1759302698488,"duration":11},"status":"passed","steps":[{"name":"Проверяю наличие плашки 'Администратор аккаунта' у пользователя в списке","time":{"start":1759302698477,"stop":1759302698488,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"email","value":"'testgarwin_yur+2@mail.ru'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Открываю https://sprout-store.ru/settings/account/user-list","time":{"start":1759302698488,"stop":1759302699886,"duration":1398},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяю, что ссылка /workspace-list отображается (Доступна только админу)","time":{"start":1759302699887,"stop":1759302708317,"duration":8430},"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/profile \nCall log:\n  - PageAssertions.to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/profile\"\n\n","statusTrace":"  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/tests/test_settings.py\", line 739, in test_change_admin_role_flow\n    modal_user.transition_to_contracts_page_assertion(base_url)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/page_opjects/settings_page/users_settings_page.py\", line 223, in transition_to_contracts_page_assertion\n    expect(self.page).to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 19027, in to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 127, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 74, in _expect_impl\n    raise AssertionError(\n","steps":[{"name":"Проверяю наличие админских прав путем перехода в настройки аккаунта","time":{"start":1759302699910,"stop":1759302708317,"duration":8407},"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://sprout-store.ru/settings/account/contracts'\nActual value: https://sprout-store.ru/profile \nCall log:\n  - PageAssertions.to_have_url with timeout 7000ms\n  - waiting for locator(\":root\")\n    11 × locator resolved to <html lang=\"en\">…</html>\n       - unexpected value \"https://sprout-store.ru/profile\"\n\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/sprout_tests_UI/sprout_tests_UI/page_opjects/settings_page/users_settings_page.py\", line 223, in transition_to_contracts_page_assertion\n    expect(self.page).to_have_url(base_url + \"/settings/account/contracts\", timeout=7000)\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 19027, in to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 127, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 74, in _expect_impl\n    raise AssertionError(\n","steps":[],"attachments":[],"parameters":[{"name":"base_url","value":"'https://sprout-store.ru'"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":18,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1759302708334,"stop":1759302709152,"duration":818},"status":"passed","steps":[],"attachments":[{"uid":"a3073e0ea8fca942","name":"trace","source":"a3073e0ea8fca942.zip","type":"application/zip","size":4666804},{"uid":"4f53e1955f3c67e7","name":"failure_screenshot","source":"4f53e1955f3c67e7.png","type":"image/png","size":57619},{"uid":"dff6f6b7815bdf23","name":"page_source","source":"dff6f6b7815bdf23.html","type":"text/html","size":207293},{"uid":"f18c60ff1f8a6140","name":"trace","source":"f18c60ff1f8a6140.zip","type":"application/zip","size":5582995},{"uid":"1c121436ced14fe5","name":"failure_screenshot","source":"1c121436ced14fe5.png","type":"image/png","size":146083},{"uid":"f5b90a26f3abe553","name":"page_source","source":"f5b90a26f3abe553.html","type":"text/html","size":290900}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"browser::0","time":{"start":1759302816173,"stop":1759302816339,"duration":166},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1759302816340,"stop":1759302816351,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_settings"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"6317-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_settings"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":22,"unknown":0,"total":24},"items":[{"uid":"b3bc90e84c0fb6ec","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/237/#testresult/b3bc90e84c0fb6ec","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\".text-tag-accent.color-dark-grey\")","time":{"start":1759218623900,"stop":1759218673455,"duration":49555}},{"uid":"179dfeefe7cdc3bb","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/236/#testresult/179dfeefe7cdc3bb","status":"passed","time":{"start":1759155666355,"stop":1759155691387,"duration":25032}},{"uid":"f553ac9f3b1c9377","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/235/#testresult/f553ac9f3b1c9377","status":"passed","time":{"start":1759069153233,"stop":1759069178371,"duration":25138}},{"uid":"a8f4779dbffb0133","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/234/#testresult/a8f4779dbffb0133","status":"passed","time":{"start":1758982812095,"stop":1758982837208,"duration":25113}},{"uid":"f7406b6fded6de8e","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/233/#testresult/f7406b6fded6de8e","status":"passed","time":{"start":1758896398947,"stop":1758896424510,"duration":25563}},{"uid":"90d45b0936e34aef","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/232/#testresult/90d45b0936e34aef","status":"passed","time":{"start":1758810163791,"stop":1758810188160,"duration":24369}},{"uid":"a183dec7f19445da","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/231/#testresult/a183dec7f19445da","status":"passed","time":{"start":1758723520574,"stop":1758723546831,"duration":26257}},{"uid":"8d22c2099745ccf6","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/230/#testresult/8d22c2099745ccf6","status":"passed","time":{"start":1758637272993,"stop":1758637298734,"duration":25741}},{"uid":"8662c471bde9eb76","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/229/#testresult/8662c471bde9eb76","status":"passed","time":{"start":1758551107701,"stop":1758551135548,"duration":27847}},{"uid":"eb7b52a3ae76022c","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/228/#testresult/eb7b52a3ae76022c","status":"passed","time":{"start":1758464380230,"stop":1758464406008,"duration":25778}},{"uid":"c16aa1be46c7390","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/227/#testresult/c16aa1be46c7390","status":"passed","time":{"start":1758377929197,"stop":1758377953438,"duration":24241}},{"uid":"17d285f7482302a4","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/226/#testresult/17d285f7482302a4","status":"passed","time":{"start":1758291673306,"stop":1758291699691,"duration":26385}},{"uid":"b0b5be72be71419a","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/225/#testresult/b0b5be72be71419a","status":"passed","time":{"start":1758205340532,"stop":1758205364977,"duration":24445}},{"uid":"5ca86c73f70c9fae","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/224/#testresult/5ca86c73f70c9fae","status":"passed","time":{"start":1758118887675,"stop":1758118912055,"duration":24380}},{"uid":"8f7a5d96ae7218ec","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/223/#testresult/8f7a5d96ae7218ec","status":"passed","time":{"start":1758095710894,"stop":1758095737690,"duration":26796}},{"uid":"5c1c93de15422bdc","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/221/#testresult/5c1c93de15422bdc","status":"passed","time":{"start":1758034505368,"stop":1758034532420,"duration":27052}},{"uid":"b300b3fbb5a8fe84","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/220/#testresult/b300b3fbb5a8fe84","status":"passed","time":{"start":1758031815401,"stop":1758031839992,"duration":24591}},{"uid":"7fa3ac5169f95579","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/219/#testresult/7fa3ac5169f95579","status":"passed","time":{"start":1757945402552,"stop":1757945428265,"duration":25713}},{"uid":"d9df0684de93e7a2","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/218/#testresult/d9df0684de93e7a2","status":"passed","time":{"start":1757859066607,"stop":1757859094361,"duration":27754}},{"uid":"702df9e5335c873d","reportUrl":"https://garagetools-garwin.github.io/sprout_tests_UI/217/#testresult/702df9e5335c873d","status":"passed","time":{"start":1757772583260,"stop":1757772607506,"duration":24246}}]},"tags":[]},"source":"c6d38e2629a33e03.json","parameterValues":["'chromium'"]}